(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2525:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5093)}])},5093:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var n=a(2676),s=a(5271),i=a(6725),c=a(6368),o=a.n(c),l=a(7529),r=a(7783);a(3485);var d=a(967),m=e=>{let{styles:t,score:a}=e,{topDailyScore:s,topMonthlyScore:i,topAllTimeScore:c}=a;return null===a?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:t.slideHeaderItem,children:[(0,n.jsx)("div",{className:t.highScoreTitle,children:"High Scores"}),(0,n.jsxs)("table",{className:t.highScoreTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:"Player"}),(0,n.jsx)("th",{children:"Points"})]})}),(0,n.jsxs)("tbody",{children:[c&&c.Players&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"All Time"}),(0,n.jsxs)("td",{className:t.highScoreName,children:[c.Players.FirstName," ",c.Players.LastName]}),(0,n.jsx)("td",{className:t.highScorePoints,children:c.Points})]}),i&&i.Players&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Monthly"}),(0,n.jsxs)("td",{className:t.highScoreName,children:[i.Players.FirstName," ",i.Players.LastName]}),(0,n.jsx)("td",{className:t.highScorePoints,children:i.Points})]}),s&&s.Players&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Daily"}),(0,n.jsxs)("td",{className:t.highScoreName,children:[s.Players.FirstName," ",s.Players.LastName]}),(0,n.jsx)("td",{className:t.highScorePoints,children:s.Points})]})]})]})]})},_=a(6910),h=e=>{let t,{styles:a,variant:i,highScores:c}=e,[o,l]=(0,s.useState)(""),[r,h]=(0,s.useState)(!1),g=e=>{l(e),h(!0)},u=()=>{h(!1)},S=r?(0,n.jsx)("div",{className:a.dialogOverlay,onClick:u,children:(0,n.jsxs)("div",{className:a.dialogBox,onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{className:a.dialogTitle,children:"Game Instructions"}),(0,n.jsx)("p",{className:a.dialogContent,dangerouslySetInnerHTML:{__html:o}}),(0,n.jsx)("button",{className:a.dialogCloseButton,onClick:u,children:"Close"})]})}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:a.slide,children:(0,n.jsxs)("div",{className:a.variantBackground,style:{backgroundImage:"url(/images/gameImages/".concat(i.name.split(" ").join(""),".jpg)")},children:[(0,n.jsxs)("div",{className:a.slideHeader,children:[(0,n.jsx)(m,{styles:a,score:(t=i.ID,c.find(e=>e.variantID===t))}),(0,n.jsx)("div",{className:a.slideHeaderItem,onClick:()=>g(i.instructions),style:{cursor:"pointer"},children:(0,n.jsx)(_.DAO,{size:30})})]}),(0,n.jsxs)("div",{className:a.slideDescription,children:[(0,n.jsx)("span",{children:i.name}),(0,n.jsx)("p",{children:i.variantDescription})]})]})}),d.createPortal(S,document.body)]})},g=e=>{let{highScores:t,styles:a,gameData:s,playersData:i,gameStatus:c,setStep:o}=e,l="images/count/".concat(i.length,"-count.svg");return(0,n.jsxs)("div",{className:a.containerScanning,children:[(0,n.jsx)("div",{className:a.leftSectionScanning,children:(0,n.jsx)(r.Mi,{easing:"ease",children:s.variants.map((e,s)=>(0,n.jsx)("div",{className:a.slide,children:(0,n.jsx)(h,{styles:a,variant:e,index:s,highScores:t})},s))})}),(0,n.jsxs)("div",{className:a.rightSectionScanning,children:[(0,n.jsxs)("div",{className:a.titleContainer,children:[(0,n.jsx)("h1",{className:a.scanningTitle,children:s.gameName||"GAME NAME"}),0===i.length&&(0,n.jsx)("div",{className:a.scanMessage,children:"Please scan your wristbands!"})]}),0===i.length?(0,n.jsxs)("div",{className:a.scan,children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}):(0,n.jsx)("div",{className:a.imageContainer,children:(0,n.jsx)("img",{src:l,alt:"".concat(i.length," fingers"),className:a.handImage})}),(0,n.jsxs)("div",{className:a.scanButtons,children:[(0,n.jsx)("button",{className:a.cancelButton,onClick:()=>{window.chrome&&window.chrome.webview?window.chrome.webview.postMessage("refresh"):console.log("WebView2 is not available")},children:"Cancel"}),(0,n.jsx)("button",{className:a.startButton,onClick:()=>{"running"!==c&&i.length>0&&o(2)},disabled:c.toLowerCase().startsWith("running")||i.length<=0,children:i.length<=0?"Please scan your wristbands":c.toLowerCase().startsWith("running")?"Game is still running. Please wait...":"Finish Scan"})]})]})]})},u=e=>{let{styles:t,gameData:a,selectedVariant:s,handleVariantClick:i}=e,c=[],o=[];return a.variants.map(e=>{"comp"===e.GameType?c.push(e):o.push(e)}),(0,n.jsxs)("div",{className:t.gameOptions,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:t.selectionSectionTitle,children:"Alliance Mode"}),c.map(e=>e.IsActive?(0,n.jsx)("div",{className:"".concat(t.gameOption," ").concat(s&&s.ID===e.ID?t.selected:""),onClick:()=>i(e),children:e.name},e.ID):null)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:t.selectionSectionTitle,children:"Compititive Circuit"}),o.map(e=>e.IsActive?(0,n.jsx)("div",{className:"".concat(t.gameOption," ").concat(s&&s.ID===e.ID?t.selected:""),onClick:()=>i(e),children:e.name},e.ID):null)]})]})},S=e=>{let{styles:t,playersData:a,selectedVariant:i}=e,[c,o]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{a.length&&i&&o(await Promise.all(a.map(async e=>await r(i.ID,e.player.PlayerID))))})()},[a,i]);let r=async(e,t)=>{var a;if(!e||!t)return 0;let n=await (0,l.Lv)(e,t);return n&&null!==(a=n.Points)&&void 0!==a?a:0};return(0,n.jsxs)("div",{className:t.scoreTable,children:[(0,n.jsxs)("div",{className:t.tableRow,children:[(0,n.jsx)("div",{children:"Player Name"}),(0,n.jsx)("div",{children:"Time Left"}),(0,n.jsx)("div",{children:"High Score"}),(0,n.jsx)("div",{children:"Team Reward"})]}),a.map((e,a)=>{var s;return(0,n.jsxs)("div",{className:t.tableRow,children:[(0,n.jsxs)("div",{children:[e.player.FirstName," ",e.player.LastName]}),(0,n.jsx)("div",{children:e.timeleft}),(0,n.jsx)("div",{children:null!==(s=c[a])&&void 0!==s?s:"Loading..."}),(0,n.jsx)("div",{children:e.reward})]},a)})]})},x=e=>{let{highScores:t,styles:a,gameData:i,playersData:c,gameStatus:o}=e,[l,r]=(0,s.useState)(!1),[d,m]=(0,s.useState)(i.variants[0]),_=()=>{window.chrome&&window.chrome.webview?window.chrome.webview.postMessage("refresh"):console.log("WebView2 is not available")};return(0,n.jsxs)("div",{className:a.containerStarting,children:[(0,n.jsxs)("div",{className:a.leftSectionStarting,children:[(0,n.jsx)("div",{className:a.titleContainer,children:(0,n.jsx)("h1",{className:a.startingTitle,children:i.gameName||"GAME NAME"})}),(0,n.jsx)(u,{styles:a,gameData:i,selectedVariant:d,handleVariantClick:e=>{m(e)}}),(0,n.jsx)(S,{styles:a,playersData:c,selectedVariant:d}),(0,n.jsxs)("div",{className:a.scanButtons,children:[(0,n.jsx)("button",{className:a.cancelButton,onClick:_,children:"Cancel"}),(0,n.jsx)("button",{className:a.startButton,onClick:()=>{if(window.chrome&&window.chrome.webview){let e="start:".concat(d.name,":").concat(c.length,":").concat(d.GameType);window.chrome.webview.postMessage(e),_()}else console.log("WebView2 is not available");r(!1)},disabled:o.toLowerCase().startsWith("running")||!d||l,children:d?"Start":"Please Select the Game"})]})]}),(0,n.jsx)("div",{className:a.rightSectionStarting,children:(0,n.jsx)("div",{className:a.slide,children:(0,n.jsx)(h,{styles:a,variant:null!=d?d:i.variants[0],highScores:t})})})]})};let v={SCANNING:0};var j=e=>{let{gameCode:t}=e,[a,i]=(0,s.useState)(null),[c,r]=(0,s.useState)(v.SCANNING),[d,m]=(0,s.useState)(!0),[_,h]=(0,s.useState)(null),[u,S]=(0,s.useState)([]),[j,N]=(0,s.useState)(""),[y,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&p(t)},[t]),(0,s.useEffect)(()=>{t&&H()},[t]),(0,s.useEffect)(()=>(C(),()=>b()),[]);let p=async e=>{try{var t,a;let n=await (0,l.Pd)(e);i(n),(null===(a=n[0])||void 0===a?void 0:null===(t=a.variants)||void 0===t?void 0:t.length)>0&&setSelectedVariant(n.variants[0]),m(!1)}catch(e){h(e),m(!1)}},H=async()=>{try{let e=await (0,l.qd)(t);console.log("High Scores Data:",e),w(e)}catch(e){console.error("Error fetching high scores:",e),h(e)}},f=async e=>{if(u.some(t=>t.wristbandTranID===e)){console.log("Scanning is finished or Wristband already tapped.");return}try{let t=await (0,l.VR)(e);S(a=>[...a,{...t,wristbandTranID:e}])}catch(e){h(e)}},C=()=>{window.receiveMessageFromWPF=e=>{console.log("Received message from WPF:",e),f(e)},window.updateStatus=e=>{N(e),console.log("Received game status from WPF:",e),j.toLowerCase().startsWith("running")&&setIsStartButtonEnabled(!1)}},b=()=>{delete window.receiveMessageFromWPF,delete window.updateStatus};return d||!y?(0,n.jsx)("p",{children:"Loading..."}):_?(0,n.jsxs)("p",{children:["Error: ",_.message]}):a?c===v.SCANNING?(0,n.jsx)(g,{highScores:y,setPlayersData:S,playersData:u,styles:o(),gameData:a,gameStatus:j,setStep:r}):(0,n.jsx)(x,{highScores:y,styles:o(),gameData:a,playersData:u,gameStatus:j,setStep:r}):(0,n.jsxs)("p",{children:["No data found for game code: ",t]})},N=()=>{let{gameCode:e}=(0,i.useRouter)().query;return(0,n.jsx)(j,{gameCode:e})}},7529:function(e,t,a){"use strict";a.d(t,{DJ:function(){return l},Lv:function(){return h},MD:function(){return c},P1:function(){return i},Pd:function(){return d},VR:function(){return m},Zy:function(){return o},lU:function(){return r},qd:function(){return _}});var n=a(2664);let s="http://localhost:8080/api",i=async e=>(await n.Z.get("".concat(s,"/player/findAll/?email=").concat(e))).data,c=async e=>(await n.Z.post("".concat(s,"/player/create"),e)).data,o=async(e,t)=>{try{return(await n.Z.put("".concat(s,"/player/").concat(e),t)).data}catch(e){console.log(e)}},l=async()=>{try{let e=await n.Z.get("".concat(s,"/config?configKey=RequireWaiver"));return"yes"===e.data.configValue.toLowerCase()}catch(e){console.log("Error fetching requireWaiver:",e)}},r=async e=>{try{let t=await n.Z.get("".concat(s,"/wristbandtran/validatePlayer?PlayerID=").concat(e));return 200==t.status}catch(e){return console.log(e),!1}},d=async e=>{try{return(await n.Z.get("".concat(s,"/game/findByGameCode/?gameCode=").concat(e))).data}catch(e){return console.log(e),null}},m=async e=>{try{return(await n.Z.get("".concat(s,"/wristbandtran/getplaysummary?wristbanduid=").concat(e))).data}catch(e){return console.log(e),null}},_=async e=>{try{return(await n.Z.get("".concat(s,"/playerScore/getTopScoresForVariants/").concat(e))).data}catch(e){return console.log(e),null}},h=async(e,t)=>{try{return(await n.Z.get("".concat(s,"/playerScore/getTopScoreForPlayer/").concat(e,"/").concat(t))).data}catch(e){return console.log(e),null}}},6368:function(e){e.exports={container:"Home_container__d256j",leftSection:"Home_leftSection__PulRA",rightSection:"Home_rightSection__CvtbV",eachSlide:"Home_eachSlide__oYG_1",imageSection:"Home_imageSection__a_axq",gameImage:"Home_gameImage__iNvl9",instructionsSection:"Home_instructionsSection__7tkz7",instructionsContent:"Home_instructionsContent__88cbV",leftUpperSection:"Home_leftUpperSection__69x4L",leftLowerSection:"Home_leftLowerSection__GWFt_",sectionTitle:"Home_sectionTitle__DKb2S",selectionSectionTitle:"Home_selectionSectionTitle__cybhG",gameStatus:"Home_gameStatus__2KuN_",scoreTable:"Home_scoreTable__uh2QF",gameOptions:"Home_gameOptions__9_3Ns",tableRow:"Home_tableRow__x2NnY",scoreCategories:"Home_scoreCategories__FCgZC",scoreBox:"Home_scoreBox__6Ml8l",scoreTitle:"Home_scoreTitle__1A_CR",scoreValue:"Home_scoreValue__tdbsn",startButton:"Home_startButton__Bekfq",gameOption:"Home_gameOption___npOA",levelDots:"Home_levelDots__2r5_E",dot:"Home_dot__R6Y82",selected:"Home_selected___eC_c",modal:"Home_modal___NgiA",modalContent:"Home_modalContent__XKBCH",closeButton:"Home_closeButton__rDX9l",scanningContainer:"Home_scanningContainer__LJzHi",titleContainer:"Home_titleContainer__9BKmw",scanningTitle:"Home_scanningTitle__rW_bS",startingTitle:"Home_startingTitle__9aBdA",scanMessage:"Home_scanMessage__5OLZP",containerScanning:"Home_containerScanning__iRhhm",containerStarting:"Home_containerStarting__Dj1M5",leftSectionScanning:"Home_leftSectionScanning___4rxp",rightSectionStarting:"Home_rightSectionStarting__VygbL",rightSectionScanning:"Home_rightSectionScanning__T1q9B",leftSectionStarting:"Home_leftSectionStarting__s2jxa",eachSlideScanning:"Home_eachSlideScanning__tANOj",gameImageScanning:"Home_gameImageScanning__QdAJk",captionScanning:"Home_captionScanning__XkRdv",imageContainer:"Home_imageContainer__14Rgd",scan:"Home_scan__71JpL",ripple:"Home_ripple__YfVoa",handImage:"Home_handImage__JRqoa",scanButtons:"Home_scanButtons__EzcyZ",cancelButton:"Home_cancelButton__Lbcr3",slide:"Home_slide__bJy2J",slideDescription:"Home_slideDescription__h7z_7",slideHeader:"Home_slideHeader__uU_IZ",slideHeaderItem:"Home_slideHeaderItem__rWB_9",highScoreTitle:"Home_highScoreTitle__NRdC6",highScoreTable:"Home_highScoreTable__gq_IT",highScoreName:"Home_highScoreName__UI7en",highScorePoints:"Home_highScorePoints__1iUt4",dialogOverlay:"Home_dialogOverlay__0yY8L",dialogBox:"Home_dialogBox__bxWxh",dialogTitle:"Home_dialogTitle__ZcbDz",dialogContent:"Home_dialogContent__Q1A13",dialogCloseButton:"Home_dialogCloseButton__cTMy8"}}},function(e){e.O(0,[385,664,317,888,774,179],function(){return e(e.s=2525)}),_N_E=e.O()}]);